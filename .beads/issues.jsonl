{"id":"bd-1","title":"beads.el: Magit-like Emacs interface for Beads","description":"Build an Emacs Lisp package that provides a Magit-like porcelain interface for Beads issue tracking. The package should live in the lisp/ directory and provide an intuitive, keyboard-driven UI for working with Beads issues directly from Emacs.\n\nKey features:\n- Status buffer showing issues by status (open, in_progress, blocked, closed)\n- Keyboard shortcuts for common operations (create, update, close, show details)\n- Integration with existing beads CLI via subprocess calls\n- Transient menus for complex operations (similar to Magit's interface)\n- Jump to issue definitions in code\n- Inline editing of issue fields\n- Dependency visualization\n- Integration with Emacs project.el for multi-project support\n\nThis will make Beads more accessible to Emacs users and provide a seamless workflow for AI-supervised coding within the editor.","design":"## Architecture\n\n### Transient Menu System\n- Root transient menu accessible via M-x beads\n- Hierarchical menu structure following Magit patterns\n- All bd CLI commands exposed with full flag/argument support\n- Uses Emacs transient library for interactive menus\n\n### List Display Mode\nCommands that display lists of items should use Emacs tabulated-list-mode:\n- **bd list** - List of issues in tabulated format\n- **bd ready** - Ready work shown in tabulated format\n- **bd blocked** - Blocked issues in tabulated format\n- **bd stats** - Statistics displayed in tabulated format (where applicable)\n- **bd dep list** - Dependencies shown in tabulated format\n\nInterface similar to M-x proced:\n- Sortable columns (click headers to sort)\n- Keyboard navigation (n/p for next/prev)\n- Actions on current item (RET to show details, u to update, c to close, etc.)\n- Refresh capability (g to refresh)\n- Mark/unmark items for batch operations\n- Filter/narrow functionality\n\n### Buffer Organization\n- *beads-status* - Main status buffer (like magit-status)\n- *beads-list* - Issue list buffer (tabulated-list-mode)\n- *beads-ready* - Ready work buffer (tabulated-list-mode)\n- *beads-blocked* - Blocked issues buffer (tabulated-list-mode)\n- *beads-show: \u003cid\u003e* - Issue detail buffers\n- *beads-output* - Command output/results buffer\n\n### Integration Points\n- Uses bd CLI via process calls (call-process, start-process)\n- JSON output parsing for structured data\n- project.el integration for multi-project support\n- Auto-refresh after mutations (create, update, close, etc.)","acceptance_criteria":"### Core Transient Menu System\n- [ ] Main entry point: M-x beads (or custom keybinding) opens root transient menu\n- [ ] Root menu shows all available bd commands organized hierarchically\n- [ ] Navigation through menu hierarchy matches Magit UX patterns\n- [ ] All transient menus use the Emacs transient library\n\n### Command Coverage (100% of bd CLI)\nEvery bd command must be accessible via transient menus with full option support:\n\n- [ ] **init** - Initialize bd in directory\n  - Flags: --prefix, --db path\n  \n- [ ] **create** - Create new issue\n  - Arguments: title (required)\n  - Flags: -t/--type, -p/--priority, -d/--description, --id, --deps, --json\n  \n- [ ] **list** - List issues\n  - Flags: --status, --type, --priority, --format, --json\n  \n- [ ] **show** - Show issue details\n  - Arguments: issue-id (required)\n  - Flags: --json\n  \n- [ ] **update** - Update issue\n  - Arguments: issue-id (required)\n  - Flags: --status, --priority, --type, --title, --acceptance-criteria, --design, --notes, --assignee, --external-ref, --json\n  \n- [ ] **close** - Close issues\n  - Arguments: issue-id(s) (required)\n  - Flags: --reason, --json\n  \n- [ ] **ready** - Show ready work\n  - Flags: --json\n  \n- [ ] **blocked** - Show blocked issues\n  - Flags: --json\n  \n- [ ] **stats** - Show statistics\n  - Flags: --json\n  \n- [ ] **dep** - Dependency management (submenu)\n  - [ ] dep add - Add dependency\n    - Arguments: from-id, to-id (required)\n    - Flags: --type, --json\n  - [ ] dep remove - Remove dependency\n    - Arguments: from-id, to-id (required)\n    - Flags: --json\n  - [ ] dep tree - Show dependency tree\n    - Arguments: issue-id (required)\n    - Flags: --json\n  - [ ] dep list - List dependencies\n    - Arguments: issue-id (required)\n    - Flags: --json\n    \n- [ ] **export** - Export to JSONL\n  - Flags: -o/--output, --json\n  \n- [ ] **import** - Import from JSONL\n  - Flags: -i/--input, --dry-run, --resolve-collisions, --json\n\n### Global Flags Support\n- [ ] All commands support global flags: --actor, --db, --json, --no-auto-flush, --no-auto-import\n- [ ] Transient menu allows setting global flags before command execution\n- [ ] Settings persist within Emacs session\n\n### User Experience\n- [ ] Transient menus show current flag/option values\n- [ ] Help text displays for each option (like Magit's inline help)\n- [ ] Validation for required arguments before command execution\n- [ ] Command output displayed in dedicated buffer\n- [ ] Error messages clearly shown\n- [ ] Success feedback with option to refresh status buffer\n\n### Testing\n- [ ] Manual testing of all commands via transient menus\n- [ ] Verification that all flags/options work correctly\n- [ ] Edge cases (missing required args, invalid values) handled gracefully","notes":"## Implementation Notes\n\n### Issue Detail Display\nWhen showing the full content of an issue (via 'bd show' or when pressing RET on an issue in a list), consider using markdown-mode for rendering:\n\n- Issue fields (description, acceptance criteria, design, notes) often contain markdown\n- markdown-mode provides syntax highlighting and makes content more readable\n- Could create a custom derived mode (beads-show-mode) that inherits from markdown-mode\n- Add special keybindings on top of markdown-mode for beads-specific actions (edit field, update status, etc.)\n\nResearch needed:\n- How to make certain sections read-only while allowing inline editing of specific fields\n- Integration between markdown-mode's features and beads commands\n- Whether to use org-mode instead for better structured editing\n- How to display metadata (status, priority, dates) alongside markdown content\n\nAlternative: Use special-mode with custom fontification rules instead of markdown-mode if we need more control over the display and interaction model.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-16T22:22:48.321576252+02:00","updated_at":"2025-10-16T22:22:48.321576252+02:00"}
{"id":"bd-10","title":"Fix missing C and U key bindings in beads-list","description":"The beads-list buffer is missing C (create) and U (update) key bindings. Need to add these to the keymap and connect to beads-create and beads-update transient menus.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-16T22:22:48.35596095+02:00","updated_at":"2025-10-16T22:22:48.35596095+02:00"}
{"id":"bd-11","title":"Fix beads-list-show to call beads-show","description":"The beads-list-show function has a TODO and doesn't actually call beads-show. Pressing RET on an issue shows an error instead of displaying issue details.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-16T22:22:48.382172553+02:00","updated_at":"2025-10-16T22:22:48.382172553+02:00"}
{"id":"bd-12","title":"Add tests for beads-list key bindings (C, U, RET)","description":"Add comprehensive tests for the new C (create), U (update), and fixed RET (show) key bindings in beads-list-test.el","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T22:22:48.407502144+02:00","updated_at":"2025-10-16T22:22:48.407502144+02:00"}
{"id":"bd-13","title":"Add support for multiline editing in beads-create description","description":"The beads-create transient menu has a 'Description (multiline)' option bound to 'M', but the multiline editing buffer doesn't follow Emacs conventions properly. Should use a proper temporary buffer mode and consider integration with markdown-mode if available.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.430184976+02:00","updated_at":"2025-10-16T22:22:48.430184976+02:00"}
{"id":"bd-14","title":"Improve beads-list keybindings to follow dired/ibuffer conventions","description":"Current keybindings in beads-list-mode:\n- 'C' for create (uppercase) is unusual, should consider 'c' or '+'\n- 'c' for update is confusing (usually 'c' means create)\n- Consider 'e' or 'RET' for update/edit (edit is more intuitive)\n- Consider standard Emacs keybindings like 'd' for delete/close\n- 'M/U' for mark all/unmark all should be '* !' and 'U' or '* u'\n- Add 'S' for sorting options\n- Consider 'w' for copy issue ID (common in Emacs)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.455069957+02:00","updated_at":"2025-10-16T22:22:48.455069957+02:00"}
{"id":"bd-15","title":"Add filtering and searching capabilities to beads-list","description":"beads-list should support:\n- '/' or 's' for incremental search/filter (like ibuffer)\n- Filter by status, priority, type\n- Clear filters with '|' or similar\n- Show active filters in mode-line\n- Consider integration with consult for advanced filtering","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-16T22:22:48.481167684+02:00","updated_at":"2025-10-16T22:22:48.481167684+02:00"}
{"id":"bd-16","title":"Add bulk operations for marked issues in beads-list","description":"Currently beads-list supports marking issues (m/u/M/U) but no bulk operations. Add:\n- 'B' prefix for bulk operations (like Magit)\n- 'B u' - bulk update (status/priority)\n- 'B c' - bulk close\n- 'B d' - bulk dependency operations\n- Show count of marked issues in mode-line\n- Consider confirmation prompts for destructive operations","status":"open","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.507119559+02:00","updated_at":"2025-10-16T22:22:48.507119559+02:00"}
{"id":"bd-17","title":"Add navigation keybindings in beads-show buffers","description":"beads-show currently has basic navigation (n/p for sections, RET for references). Add:\n- '[' and ']' for prev/next bd-N reference (like compilation-mode)\n- 'TAB' to jump to next clickable element\n- 'S-TAB' for previous clickable element\n- 'o' to open reference in other window\n- 'v' to visit reference file if it's a file path\n- Consider integration with outline-mode for section folding","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.533955892+02:00","updated_at":"2025-10-16T22:22:48.533955892+02:00"}
{"id":"bd-18","title":"Improve transient menu keybindings to avoid conflicts","description":"Current transient menus have some keybinding issues:\n- beads-update uses 'G' for design (unusual, conflicts with Magit's 'G' for refresh)\n- Lowercase/uppercase letter usage is inconsistent\n- Consider using prefixes for related operations (like 'f' prefix for fields)\n- Document why specific keys were chosen in comments\n- Follow transient.el best practices from Magit","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.55853623+02:00","updated_at":"2025-10-16T22:22:48.55853623+02:00"}
{"id":"bd-19","title":"Add completion and history for beads commands","description":"Emacs should provide better completion for:\n- Issue IDs with metadata in annotations (status, title preview)\n- Dependency types\n- Status/priority/type values\n- History for previously entered values\n- Consider embark integration for issue IDs\n- Add completing-read metadata categories for better integration with vertico/ivy/helm","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.584587622+02:00","updated_at":"2025-10-16T22:22:48.584587622+02:00"}
{"id":"bd-2","title":"beads.el: Core package infrastructure and utilities","description":"Set up the foundational infrastructure for beads.el package.\n\nTasks:\n- Create lisp/ directory structure\n- Set up beads.el main file with package metadata\n- Implement bd CLI process wrapper functions (sync and async)\n- Add JSON parsing utilities for bd command output\n- Implement project.el integration for finding .beads directory\n- Add error handling and logging utilities\n- Create customization group for user settings\n- Set up autoload cookies\n\nDependencies:\n- Emacs 27.1+ (for transient, project.el, json.el)\n- transient library\n- json.el (built-in)","acceptance_criteria":"## Acceptance Criteria\n\n### Core Functionality\n- [ ] Package loads without errors in Emacs 27.1+\n- [ ] Customization group 'beads' is defined with all user options\n- [ ] Autoload cookies properly set for public commands\n- [ ] bd CLI executable is found and validated\n\n### Process Wrapper Functions\n- [ ] Synchronous bd command execution with JSON parsing\n- [ ] Asynchronous bd command execution with callbacks\n- [ ] Proper error handling for missing bd executable\n- [ ] Proper error handling for invalid JSON responses\n- [ ] Timeout handling for long-running commands\n- [ ] Support for all global flags (--actor, --db, etc.)\n\n### JSON Utilities\n- [ ] Parse bd list/show/ready/blocked output correctly\n- [ ] Handle malformed JSON gracefully\n- [ ] Extract all issue fields (id, title, status, priority, etc.)\n- [ ] Support for dependency tree JSON structure\n\n### Project Integration\n- [ ] Automatically find .beads directory using project.el\n- [ ] Fall back to searching up directory tree if no project\n- [ ] Cache project root for performance\n- [ ] Support multiple projects in same Emacs session\n\n### Error Handling \u0026 Logging\n- [ ] User-friendly error messages displayed in echo area\n- [ ] Optional debug logging to *beads-debug* buffer\n- [ ] Validation of required parameters before command execution\n\n## Test Coverage (ERT)\nTests must live in lisp/test/ directory and provide:\n\n- [ ] **test/beads-process-test.el**\n  - Mock bd command execution with fake responses\n  - Test JSON parsing with valid and invalid input\n  - Test error handling for command failures\n  - Test timeout behavior\n  - Test global flag construction\n\n- [ ] **test/beads-project-test.el**\n  - Test project root detection in various scenarios\n  - Test .beads directory discovery\n  - Test fallback behavior when no project found\n  - Test multiple project handling\n\n- [ ] **test/beads-utils-test.el**\n  - Test utility functions (string parsing, validation, etc.)\n  - Test customization variable handling\n  - Test path construction\n\nAll tests must pass with 'make test' or equivalent command.\nTest coverage should be \u003e80% for core utility functions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.609625695+02:00","updated_at":"2025-10-16T22:22:48.609625695+02:00","dependencies":[{"issue_id":"bd-2","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:48.946652488+02:00","created_by":"import"}]}
{"id":"bd-20","title":"Add org-mode integration for beads issues","description":"Integrate beads with org-mode:\n- org-store-link support for beads issues\n- org-open-at-point for bd-N references in org files\n- Export org headings as beads issues\n- Import beads issues as org TODO items\n- org-agenda integration to show beads issues\n- Consider org-ql integration for querying","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-16T22:22:48.635189419+02:00","updated_at":"2025-10-16T22:22:48.635189419+02:00"}
{"id":"bd-21","title":"Add visual dependency graph view","description":"Create a graphical view of issue dependencies:\n- Use graphviz/dot to generate dependency graphs\n- Interactive graph navigation (click to jump to issues)\n- Highlight critical paths\n- Filter graph by issue type, status, priority\n- Export graph to image formats\n- Consider integration with org-roam-ui style visualization","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-10-16T22:22:48.661170143+02:00","updated_at":"2025-10-16T22:22:48.661170143+02:00"}
{"id":"bd-22","title":"Add eldoc support for beads issue references","description":"When cursor is on a bd-N reference, eldoc should show:\n- Issue title and status in echo area\n- Full issue metadata in eldoc buffer\n- Works in all modes (code comments, org files, markdown, etc.)\n- Cache issue data for performance\n- Update cache when issues are modified","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-16T22:22:48.687643505+02:00","updated_at":"2025-10-16T22:22:48.687643505+02:00"}
{"id":"bd-23","title":"Add quickstart command integration","description":"The bd CLI has a 'quickstart' command that's not exposed in beads.el. Add:\n- beads-quickstart command to show tutorial\n- Display in a special buffer with navigation\n- Interactive tutorial steps\n- Help new users discover features\n- Link to documentation","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:22:48.713522751+02:00","updated_at":"2025-10-16T22:22:48.713522751+02:00"}
{"id":"bd-3","title":"beads.el: Implement tabulated-list-mode for issue lists","description":"Create tabulated-list-mode based buffers for displaying issue lists.\n\nFeatures:\n- beads-list-mode derived from tabulated-list-mode\n- Configurable columns: ID, Status, Priority, Type, Title\n- Sortable columns (click header or keyboard shortcuts)\n- Support for bd list, bd ready, bd blocked commands\n- Keyboard navigation (n/p, RET to show details)\n- Mark/unmark functionality for batch operations\n- Refresh capability (g key)\n- Filter/narrow by status, priority, type\n- Colorize status and priority fields\n- Show issue count in mode line\n\nBuffers:\n- *beads-list* - All issues\n- *beads-ready* - Ready work\n- *beads-blocked* - Blocked issues\n\nCommands:\n- beads-list\n- beads-ready  \n- beads-blocked","acceptance_criteria":"## Acceptance Criteria\n\n### Display Functionality\n- [ ] beads-list-mode correctly inherits from tabulated-list-mode\n- [ ] Columns display: ID, Status, Priority, Type, Title\n- [ ] Column widths appropriate and configurable\n- [ ] Header line displays and is interactive\n\n### Data Population\n- [ ] bd list --json output correctly parsed into table entries\n- [ ] bd ready --json output displayed in *beads-ready* buffer\n- [ ] bd blocked --json output displayed in *beads-blocked* buffer\n- [ ] Empty results handled gracefully with message\n\n### Sorting \u0026 Navigation\n- [ ] Click column headers to sort (or keyboard shortcut)\n- [ ] n/p navigate to next/previous issue\n- [ ] RET on issue opens detail view (beads-show)\n- [ ] TAB cycles through sortable columns\n\n### Actions on Items\n- [ ] u key updates current issue (opens transient)\n- [ ] c key closes current issue\n- [ ] s key shows issue details\n- [ ] q key quits buffer\n\n### Mark/Unmark for Batch Operations\n- [ ] m marks current issue\n- [ ] u unmarks current issue\n- [ ] M marks all issues\n- [ ] U unmarks all issues\n- [ ] Marked issues can be closed in batch\n\n### Refresh \u0026 Filter\n- [ ] g key refreshes buffer from bd CLI\n- [ ] Filter by status (/) with completion\n- [ ] Filter by priority with completion\n- [ ] Filter by type with completion\n- [ ] Clear filters\n\n### Visual Styling\n- [ ] Status field colorized (open=blue, in_progress=yellow, blocked=red, closed=gray)\n- [ ] Priority colorized (0=red, 1=orange, 2=default, 3-4=gray)\n- [ ] Mode line shows issue count and filter status\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-list-test.el:\n\n- [ ] **Buffer Creation**\n  - Test buffer creation and mode activation\n  - Test buffer naming\n  - Test switching between list/ready/blocked buffers\n\n- [ ] **Data Parsing**\n  - Mock bd list/ready/blocked JSON responses\n  - Test table entry generation from JSON\n  - Test handling of empty results\n  - Test handling of malformed data\n\n- [ ] **Sorting**\n  - Test sorting by each column\n  - Test ascending/descending order\n  - Test sort stability\n\n- [ ] **Navigation**\n  - Test cursor movement (n/p)\n  - Test RET opening show buffer\n  - Test actions on current item\n\n- [ ] **Mark/Unmark**\n  - Test marking single items\n  - Test marking all items\n  - Test unmarking\n  - Test batch operations on marked items\n\n- [ ] **Filtering**\n  - Test filter by status/priority/type\n  - Test filter combinations\n  - Test filter clearing\n  - Test mode line updates\n\nTest coverage should be \u003e75% for list mode functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.73771921+02:00","updated_at":"2025-10-16T22:22:48.73771921+02:00","dependencies":[{"issue_id":"bd-3","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:48.9745805+02:00","created_by":"import"},{"issue_id":"bd-3","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:48.997408538+02:00","created_by":"import"}]}
{"id":"bd-4","title":"beads.el: Issue detail view with markdown rendering","description":"Implement issue detail display buffer with markdown rendering.\n\nFeatures:\n- beads-show-mode derived from markdown-mode (or special-mode)\n- Display full issue details in formatted layout\n- Sections: metadata header, description, acceptance criteria, design, notes\n- Syntax highlighting for markdown content\n- Read-only by default with edit commands\n- Keybindings for common actions (u: update status, c: close, e: edit field)\n- Show dependency information\n- Display audit trail (created_at, updated_at, actor)\n- Link to related issues (clickable bd-N references)\n\nBuffer naming:\n- *beads-show: bd-N*\n\nCommands:\n- beads-show (prompt for ID or use at-point)\n- beads-show-at-point\n- beads-edit-field (enter edit mode for specific field)\n- beads-update-status\n- beads-close-issue\n\nResearch decisions:\n- markdown-mode vs org-mode vs special-mode with custom fontification\n- How to handle inline editing of fields\n- Displaying metadata alongside markdown","acceptance_criteria":"## Acceptance Criteria\n\n### Display \u0026 Rendering\n- [ ] beads-show-mode correctly defined (derived from markdown-mode or special-mode)\n- [ ] Buffer named *beads-show: bd-N* for issue bd-N\n- [ ] Metadata header displays: ID, Status, Priority, Type, Created/Updated dates\n- [ ] All text fields rendered with proper sections: Description, Acceptance Criteria, Design, Notes\n- [ ] Markdown syntax highlighting works correctly\n- [ ] Empty fields handled gracefully (not displayed or shown as empty)\n\n### Navigation \u0026 Links\n- [ ] bd-N references in text are clickable (jump to that issue)\n- [ ] Links work across all fields (description, notes, etc.)\n- [ ] n/p navigate to next/previous section\n- [ ] q quits and returns to previous buffer\n\n### Actions\n- [ ] u key opens update transient with current values\n- [ ] c key closes issue with reason prompt\n- [ ] e key edits field at point (context-aware)\n- [ ] d key shows dependency tree\n- [ ] g key refreshes issue from bd CLI\n\n### Field Editing\n- [ ] Inline editing for description field\n- [ ] Inline editing for acceptance criteria field\n- [ ] Inline editing for design field\n- [ ] Inline editing for notes field\n- [ ] Edits saved via bd update command\n- [ ] Confirmation before saving changes\n\n### Dependency Display\n- [ ] Dependencies section shows all deps with types\n- [ ] Clickable dependency links\n- [ ] Visual indication of dependency type (blocks, related, etc.)\n\n### Read-only Sections\n- [ ] Metadata header is read-only\n- [ ] Separation between read-only and editable regions clear\n- [ ] Attempt to edit read-only region shows helpful message\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-show-test.el:\n\n- [ ] **Buffer Creation \u0026 Display**\n  - Test buffer creation for valid issue\n  - Test buffer naming\n  - Test error handling for non-existent issue\n  - Test mode activation\n\n- [ ] **Markdown Rendering**\n  - Test markdown syntax highlighting\n  - Test multi-line content rendering\n  - Test code blocks in markdown\n  - Test headers and lists\n\n- [ ] **Link Detection**\n  - Test bd-N reference detection\n  - Test link creation and navigation\n  - Test invalid reference handling\n\n- [ ] **Field Editing**\n  - Mock editing workflow\n  - Test edit mode activation\n  - Test save operation\n  - Test cancel operation\n  - Test validation\n\n- [ ] **Actions**\n  - Test update command integration\n  - Test close command\n  - Test refresh\n  - Test navigation commands\n\n- [ ] **Dependency Display**\n  - Mock dependency data\n  - Test dependency rendering\n  - Test dependency navigation\n\nTest coverage should be \u003e70% for show mode functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.764464196+02:00","updated_at":"2025-10-16T22:22:48.764464196+02:00","dependencies":[{"issue_id":"bd-4","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.020059177+02:00","created_by":"import"},{"issue_id":"bd-4","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:49.044627609+02:00","created_by":"import"}]}
{"id":"bd-5","title":"beads.el: Transient menu for bd create command","description":"Implement transient menu for creating new issues.\n\nTransient definition:\n- Prefix: beads-create (bound in main menu)\n- Infixes for all flags:\n  - Type (-t): bug, feature, task, epic, chore\n  - Priority (-p): 0-4 with descriptions\n  - Description (-d): multiline input\n  - Custom ID (--id): for parallel workers\n  - Dependencies (--deps): discovered-from, blocks, etc.\n- Suffix: Execute create command\n\nFeatures:\n- Interactive prompts with completion\n- Validation of required fields (title)\n- Show current values in transient display\n- Preview command before execution\n- Auto-refresh list buffers after creation\n- Support for templates (optional)\n\nIntegration:\n- Call bd create with --json flag\n- Parse response and show created issue\n- Handle errors gracefully","acceptance_criteria":"## Acceptance Criteria\n\n### Transient Menu Definition\n- [ ] beads-create-transient defined using transient-define-prefix\n- [ ] Menu accessible from root transient menu\n- [ ] Menu can also be invoked directly via M-x beads-create\n\n### Infix Arguments\n- [ ] Type selection (-t): bug, feature, task, epic, chore with completion\n- [ ] Priority selection (-p): 0-4 with descriptions (0=Critical, 1=High, etc.)\n- [ ] Description input (-d): multiline text input\n- [ ] Custom ID (--id): optional string input for parallel workers\n- [ ] Dependencies (--deps): format \"type:issue-id\" with completion\n\n### Suffix Actions\n- [ ] Create action constructs correct bd create command\n- [ ] All infix values properly passed to bd CLI\n- [ ] --json flag automatically added\n- [ ] Command executed and JSON response parsed\n\n### User Experience\n- [ ] Current infix values displayed in transient menu\n- [ ] Required fields (title) validated before execution\n- [ ] Help text shown for each option\n- [ ] Preview full command before execution (optional)\n- [ ] Error messages displayed clearly\n- [ ] Success message with created issue ID\n\n### Integration\n- [ ] After successful creation, show created issue\n- [ ] Refresh any open list buffers\n- [ ] Return to appropriate buffer (list or show)\n\n### Optional Features\n- [ ] Template support for common issue types\n- [ ] Recently used values suggested\n- [ ] Duplicate issue detection warning\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-transient-create-test.el:\n\n- [ ] **Transient Definition**\n  - Test prefix command exists\n  - Test infix commands registered\n  - Test suffix commands work\n\n- [ ] **Command Construction**\n  - Test bd create command building with all flags\n  - Test title handling (with spaces, special chars)\n  - Test description multiline handling\n  - Test dependency format parsing\n  - Test global flags inclusion\n\n- [ ] **Validation**\n  - Test missing title error\n  - Test invalid priority error\n  - Test invalid type error\n  - Test invalid dependency format\n\n- [ ] **Execution**\n  - Mock bd create --json response\n  - Test successful creation flow\n  - Test error handling\n  - Test buffer refresh after creation\n\n- [ ] **Integration**\n  - Test show buffer opens after creation\n  - Test list buffer refresh\n  - Test multiple creates in sequence\n\nTest coverage should be \u003e70% for create transient functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.791056489+02:00","updated_at":"2025-10-16T22:22:48.791056489+02:00","dependencies":[{"issue_id":"bd-5","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.071233947+02:00","created_by":"import"},{"issue_id":"bd-5","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:49.095799337+02:00","created_by":"import"}]}
{"id":"bd-6","title":"beads.el: Transient menu for bd update command","description":"Implement transient menu for updating existing issues.\n\nTransient definition:\n- Prefix: beads-update (bound in main menu and show buffer)\n- Infixes for all flags:\n  - Status (-s): open, in_progress, blocked, closed\n  - Priority (-p): 0-4\n  - Type (--type): bug, feature, task, epic, chore\n  - Title (--title): change title\n  - Acceptance criteria (--acceptance-criteria): multiline\n  - Design (--design): multiline\n  - Notes (--notes): multiline\n  - Assignee (-a): set assignee\n  - External ref (--external-ref): gh-N, jira-X, etc.\n- Suffix: Execute update command\n\nFeatures:\n- Auto-populate current values from issue\n- Support updating from list buffer (use current item)\n- Support updating from show buffer (use current issue)\n- Show diff of changes before applying\n- Auto-refresh buffers after update\n\nContext-aware:\n- In list buffer: operate on current item or marked items\n- In show buffer: operate on displayed issue\n- Elsewhere: prompt for issue ID","acceptance_criteria":"## Acceptance Criteria\n\n### Transient Menu Definition\n- [ ] beads-update-transient defined using transient-define-prefix\n- [ ] Menu accessible from root transient, list buffer, and show buffer\n- [ ] Can be invoked directly via M-x beads-update\n\n### Context Awareness\n- [ ] In list buffer: operates on current item or marked items\n- [ ] In show buffer: operates on displayed issue\n- [ ] Elsewhere: prompts for issue ID with completion\n- [ ] Auto-populate current values when updating existing issue\n\n### Infix Arguments\n- [ ] Status (-s): open, in_progress, blocked, closed with completion\n- [ ] Priority (-p): 0-4 with descriptions\n- [ ] Type (--type): bug, feature, task, epic, chore\n- [ ] Title (--title): string input\n- [ ] Acceptance criteria (--acceptance-criteria): multiline input\n- [ ] Design (--design): multiline input\n- [ ] Notes (--notes): multiline input\n- [ ] Assignee (-a): string input\n- [ ] External ref (--external-ref): string input (e.g., gh-9, jira-ABC)\n\n### Suffix Actions\n- [ ] Update action constructs correct bd update command\n- [ ] Only changed fields included in command\n- [ ] --json flag automatically added\n- [ ] Command executed and JSON response parsed\n\n### User Experience\n- [ ] Current values pre-populated in transient menu\n- [ ] Show diff of changes before applying (optional)\n- [ ] Help text for each option\n- [ ] Error messages displayed clearly\n- [ ] Success message after update\n\n### Batch Operations\n- [ ] Support updating multiple marked issues in list buffer\n- [ ] Only applicable fields updated in batch (status, priority, type)\n- [ ] Confirmation before batch update\n\n### Integration\n- [ ] Refresh show buffer after update\n- [ ] Refresh list buffers after update\n- [ ] Stay in current buffer or return to appropriate buffer\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-transient-update-test.el:\n\n- [ ] **Transient Definition**\n  - Test prefix command exists\n  - Test infix commands registered\n  - Test suffix commands work\n\n- [ ] **Context Detection**\n  - Test issue ID extraction from list buffer\n  - Test issue ID extraction from show buffer\n  - Test prompt when no context available\n  - Test marked items detection\n\n- [ ] **Current Value Population**\n  - Test fetching current issue values\n  - Test pre-populating transient with current values\n  - Test handling missing optional fields\n\n- [ ] **Command Construction**\n  - Test bd update command with single field\n  - Test bd update command with multiple fields\n  - Test only changed fields included\n  - Test global flags inclusion\n\n- [ ] **Validation**\n  - Test invalid issue ID error\n  - Test invalid status/priority/type values\n  - Test empty required fields\n\n- [ ] **Batch Operations**\n  - Test batch update command construction\n  - Test batch update execution\n  - Test confirmation prompt\n\n- [ ] **Integration**\n  - Mock bd update --json response\n  - Test buffer refresh after update\n  - Test error handling\n  - Test multiple sequential updates\n\nTest coverage should be \u003e70% for update transient functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.816398091+02:00","updated_at":"2025-10-16T22:22:48.816398091+02:00","dependencies":[{"issue_id":"bd-6","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.12209648+02:00","created_by":"import"},{"issue_id":"bd-6","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:49.147749692+02:00","created_by":"import"}]}
{"id":"bd-7","title":"beads.el: Transient menus for remaining bd commands","description":"Implement transient menus for all remaining bd commands.\n\nCommands to implement:\n\n1. **bd close** - Close issues\n   - Support multiple issue IDs\n   - Reason flag (--reason)\n   - Batch close from marked items\n\n2. **bd dep** - Dependency submenu\n   - dep add (from-id, to-id, --type)\n   - dep remove (from-id, to-id)\n   - dep tree (issue-id) - maybe special visualization\n   - dep list (issue-id)\n\n3. **bd list** - Enhanced list with filters\n   - Status filter (--status)\n   - Type filter (--type)\n   - Priority filter (--priority)\n   - Format option (--format)\n\n4. **bd stats** - Statistics display\n   - Show in special buffer with formatting\n\n5. **bd export** - Export to JSONL\n   - Output path (-o/--output)\n\n6. **bd import** - Import from JSONL\n   - Input path (-i/--input)\n   - Dry run (--dry-run)\n   - Resolve collisions (--resolve-collisions)\n\n7. **bd init** - Initialize bd\n   - Prefix (--prefix)\n   - DB path (--db)\n\nGlobal flags accessible from all commands:\n- --actor, --db, --json, --no-auto-flush, --no-auto-import","acceptance_criteria":"## Acceptance Criteria\n\nAll remaining bd commands must have transient menu implementations:\n\n### bd close\n- [ ] Transient menu for closing issues\n- [ ] Support single issue ID\n- [ ] Support multiple issue IDs from marked items\n- [ ] Reason flag (--reason) with text input\n- [ ] Confirmation before closing\n- [ ] Refresh buffers after close\n\n### bd dep (Dependency submenu)\n- [ ] Parent transient menu for dependencies\n- [ ] **dep add**: from-id, to-id, --type (blocks, related, parent-child, discovered-from)\n- [ ] **dep remove**: from-id, to-id with confirmation\n- [ ] **dep tree**: issue-id, display in special buffer with tree visualization\n- [ ] **dep list**: issue-id, display in tabulated-list buffer\n- [ ] Context-aware: use current issue from list/show buffer\n\n### bd list (Enhanced filtering)\n- [ ] Transient menu with filter options\n- [ ] Status filter (--status) with multi-select\n- [ ] Type filter (--type) with multi-select\n- [ ] Priority filter (--priority) with multi-select\n- [ ] Format option (--format)\n- [ ] Results displayed in list buffer\n\n### bd stats\n- [ ] Execute bd stats --json\n- [ ] Display in special formatted buffer\n- [ ] Show: total issues, by status, by priority, by type\n- [ ] Visual representation (progress bars, percentages)\n\n### bd export\n- [ ] Transient menu for export\n- [ ] Output path (-o/--output) with file completion\n- [ ] Default to .beads/issues.jsonl\n- [ ] Confirmation if file exists\n- [ ] Success message with exported count\n\n### bd import\n- [ ] Transient menu for import\n- [ ] Input path (-i/--input) with file completion\n- [ ] Dry run flag (--dry-run) toggle\n- [ ] Resolve collisions flag (--resolve-collisions) toggle\n- [ ] Show import preview if dry-run\n- [ ] Confirmation before actual import\n- [ ] Display results (imported, skipped, collisions)\n\n### bd init\n- [ ] Transient menu for initialization\n- [ ] Prefix flag (--prefix) with default suggestions\n- [ ] DB path flag (--db) with file completion\n- [ ] Validation that directory is not already initialized\n- [ ] Success message with created paths\n\n### Global Flags\n- [ ] All menus support --actor flag\n- [ ] All menus support --db flag\n- [ ] All menus support --json flag (automatic)\n- [ ] All menus support --no-auto-flush flag\n- [ ] All menus support --no-auto-import flag\n- [ ] Global flag values persist within session\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-transient-misc-test.el:\n\n- [ ] **bd close**\n  - Test single close command\n  - Test batch close from marked items\n  - Test with/without reason\n  - Test confirmation dialog\n\n- [ ] **bd dep**\n  - Test dep add with all types\n  - Test dep remove with confirmation\n  - Test dep tree visualization\n  - Test dep list display\n  - Test context awareness\n\n- [ ] **bd list filters**\n  - Test filter command construction\n  - Test multi-select filters\n  - Test filter combinations\n  - Test result display\n\n- [ ] **bd stats**\n  - Mock stats JSON response\n  - Test stats buffer creation\n  - Test formatted display\n  - Test visual elements\n\n- [ ] **bd export**\n  - Test export command construction\n  - Test file path handling\n  - Test overwrite confirmation\n  - Mock export execution\n\n- [ ] **bd import**\n  - Test import command with flags\n  - Test dry-run mode\n  - Test collision resolution\n  - Mock import results\n\n- [ ] **bd init**\n  - Test init command construction\n  - Test path validation\n  - Mock initialization\n\n- [ ] **Global Flags**\n  - Test global flag inheritance\n  - Test session persistence\n  - Test flag overrides\n\nTest coverage should be \u003e65% for misc transient functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.840224104+02:00","updated_at":"2025-10-16T22:22:48.840224104+02:00","dependencies":[{"issue_id":"bd-7","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.174343979+02:00","created_by":"import"},{"issue_id":"bd-7","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:49.199147926+02:00","created_by":"import"}]}
{"id":"bd-8","title":"beads.el: Root transient menu and keybindings","description":"Implement the main entry point and root transient menu.\n\nRoot transient menu structure:\n- Groups organized logically (View, Create/Edit, Dependencies, Admin)\n- Hierarchy similar to Magit's dispatch menu\n\nMenu layout:\n\n\nKeybindings:\n- Global: M-x beads (or custom binding like C-c b)\n- In code: Jump to issue at point (bd-N references)\n- Context-aware commands in list/show buffers\n\nFeatures:\n- Show current project/database in menu header\n- Persistent settings within session\n- Quick access to most common commands","acceptance_criteria":"## Acceptance Criteria\n\n### Root Transient Menu\n- [ ] beads-dispatch (or beads-main) transient defined\n- [ ] Accessible via M-x beads\n- [ ] Optional global keybinding (e.g., C-c b) documented\n- [ ] Menu organized into logical groups\n\n### Menu Structure\n- [ ] **View group**: list, ready, blocked, show, stats\n- [ ] **Create/Edit group**: create, update, close\n- [ ] **Dependencies group**: dep submenu\n- [ ] **Admin group**: init, export, import\n- [ ] **Settings group**: actor, database path configuration\n\n### Menu Header\n- [ ] Display current project name\n- [ ] Display current database path\n- [ ] Display beads version (from bd --version)\n- [ ] Visual separator between header and commands\n\n### Command Bindings\n- [ ] Single-key bindings for frequent operations\n- [ ] Consistent key scheme (l=list, r=ready, c=create, etc.)\n- [ ] Help text for each command\n- [ ] Submenu indication for nested menus\n\n### Context-Aware Commands\n- [ ] Jump to issue at point (bd-N in any buffer)\n- [ ] Context detection in list/show buffers\n- [ ] Quick actions from current context\n\n### Global Keybindings\n- [ ] M-x beads always works\n- [ ] Optional C-c b prefix (customizable)\n- [ ] Jump to issue at point: C-c b j or similar\n- [ ] Quick create: C-c b c\n- [ ] Quick list: C-c b l\n\n### Integration\n- [ ] All submenus accessible from root menu\n- [ ] Navigation between menus smooth\n- [ ] Quit returns to previous buffer\n- [ ] Command execution closes transient by default\n\n### Customization\n- [ ] User can customize key prefix\n- [ ] User can disable global bindings\n- [ ] User can add custom menu items\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-transient-root-test.el:\n\n- [ ] **Menu Definition**\n  - Test root transient exists\n  - Test all groups defined\n  - Test all commands bound\n\n- [ ] **Menu Display**\n  - Test header generation\n  - Test project name display\n  - Test database path display\n  - Mock bd --version output\n\n- [ ] **Navigation**\n  - Test accessing submenus\n  - Test returning from submenus\n  - Test quit behavior\n\n- [ ] **Context Commands**\n  - Test bd-N reference detection at point\n  - Test jump to issue functionality\n  - Test invalid reference handling\n\n- [ ] **Keybindings**\n  - Test M-x beads invocation\n  - Test global keybinding (if enabled)\n  - Test context-aware bindings\n\n- [ ] **Customization**\n  - Test custom key prefix\n  - Test disabled global bindings\n  - Test custom menu items\n\nTest coverage should be \u003e70% for root transient functionality.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T22:22:48.866529389+02:00","updated_at":"2025-10-16T22:22:48.866529389+02:00","dependencies":[{"issue_id":"bd-8","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.22354702+02:00","created_by":"import"},{"issue_id":"bd-8","depends_on_id":"bd-2","type":"blocks","created_at":"2025-10-16T22:22:49.248592907+02:00","created_by":"import"}]}
{"id":"bd-9","title":"beads.el: Testing and documentation","description":"Create tests and documentation for beads.el package.\n\nTesting:\n- Unit tests for utility functions (JSON parsing, process handling)\n- Integration tests for bd command invocations\n- Mock bd responses for testing without real database\n- Test transient menu definitions\n- Test tabulated-list rendering\n- Test buffer state management\n\nDocumentation:\n- README.md for lisp/ directory\n- Installation instructions (MELPA, manual)\n- Quick start guide\n- Configuration examples\n- Keybinding reference\n- Screenshots/demos\n- Comparison with CLI workflow\n- Troubleshooting section\n\nPackage files:\n- beads-pkg.el (package descriptor)\n- Commentary section in beads.el\n- Docstrings for all public functions\n- Customization variable docs","acceptance_criteria":"## Acceptance Criteria\n\n### Test Infrastructure\n- [ ] Makefile or test runner script for running all tests\n- [ ] Command: make test or equivalent runs all ERT tests\n- [ ] Command: make test-coverage generates coverage report\n- [ ] Tests located in lisp/test/ directory\n- [ ] All test files follow naming: *-test.el\n\n### Test Files Required\nAll test files from other issues must exist and pass:\n- [ ] test/beads-process-test.el (from bd-2)\n- [ ] test/beads-project-test.el (from bd-2)\n- [ ] test/beads-utils-test.el (from bd-2)\n- [ ] test/beads-list-test.el (from bd-3)\n- [ ] test/beads-show-test.el (from bd-4)\n- [ ] test/beads-transient-create-test.el (from bd-5)\n- [ ] test/beads-transient-update-test.el (from bd-6)\n- [ ] test/beads-transient-misc-test.el (from bd-7)\n- [ ] test/beads-transient-root-test.el (from bd-8)\n\n### Coverage Targets\n- [ ] Overall test coverage \u003e70%\n- [ ] Core utilities (process, project, utils) \u003e80%\n- [ ] UI components (list, show, transient) \u003e65%\n- [ ] Coverage report generated and reviewed\n\n### Test Quality\n- [ ] All tests pass on Emacs 27.1+\n- [ ] Tests use proper mocking for bd CLI calls\n- [ ] No external dependencies required for tests\n- [ ] Tests run in isolated environments\n- [ ] Fast test execution (\u003c30 seconds total)\n\n### Documentation\n\n#### README.md in lisp/\n- [ ] Project overview and features\n- [ ] Requirements (Emacs version, dependencies)\n- [ ] Installation instructions (MELPA, manual, use-package)\n- [ ] Quick start guide\n- [ ] Configuration examples\n- [ ] Keybinding reference table\n- [ ] Comparison with CLI workflow\n- [ ] Screenshots or GIFs demonstrating usage\n- [ ] Troubleshooting section\n- [ ] Contributing guidelines\n- [ ] License\n\n#### Package Files\n- [ ] beads-pkg.el with proper package descriptor\n- [ ] Package-Version header\n- [ ] Package-Requires specifying dependencies\n- [ ] Keywords for MELPA\n\n#### Code Documentation\n- [ ] Commentary section in beads.el\n- [ ] Docstrings for all public functions (;;; docstring format)\n- [ ] Docstrings for all customization variables\n- [ ] Code comments for complex logic\n- [ ] Examples in docstrings where helpful\n\n#### User Guide\n- [ ] Configuration examples for different workflows\n- [ ] Integration with other packages (projectile, etc.)\n- [ ] Customization options documented\n- [ ] Performance tips\n- [ ] Known limitations\n\n### CI/CD\n- [ ] GitHub Actions workflow for testing (optional but recommended)\n- [ ] Test on multiple Emacs versions (27.1, 28.x, 29.x)\n- [ ] Linting with package-lint or checkdoc\n\n## Test Coverage (ERT)\nTests in lisp/test/beads-meta-test.el:\n\n- [ ] **Test Runner**\n  - Test that all test files load without error\n  - Test that all tests are discovered\n  - Test coverage calculation works\n\n- [ ] **Package Loading**\n  - Test package loads without errors\n  - Test autoloads are correct\n  - Test no compilation warnings\n\n- [ ] **Documentation**\n  - Test README.md exists and is well-formed\n  - Test all public functions have docstrings\n  - Test package metadata is correct\n\nEnsure comprehensive test suite supports long-term maintenance.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T22:22:48.892362039+02:00","updated_at":"2025-10-16T22:22:48.892362039+02:00","dependencies":[{"issue_id":"bd-9","depends_on_id":"bd-1","type":"discovered-from","created_at":"2025-10-16T22:22:49.273223548+02:00","created_by":"import"}]}
{"id":"beads-1","title":"Add C-c C-e markdown editing in beads-show-mode","description":"Add ability to edit issue fields directly from beads-show-mode using C-c C-e, opening a markdown editing buffer with C-c C-c to save and C-c C-k to cancel.\n\n## Background\n\nCurrently, users viewing an issue in beads-show-mode can only read issue details. To edit, they must:\n1. Navigate back to beads-list\n2. Press 'e' to open beads-update transient\n3. Use the transient menu to edit fields\n\nThis is cumbersome for quick edits, especially for multiline fields like Description, Acceptance Criteria, Design, and Notes.\n\n## Proposed Solution\n\nAdd C-c C-e keybinding in beads-show-mode that:\n1. Opens a full-screen markdown editing buffer\n2. Pre-populates with the field content at point (or prompts to select field)\n3. Allows editing in markdown-mode\n4. C-c C-c saves changes via bd update and refreshes show buffer\n5. C-c C-k cancels and returns to show buffer\n\n## Technical Design\n\n### Keybinding\nAdd to beads-show-mode-map (beads-show.el line ~141):\n```elisp\n(define-key map (kbd \"C-c C-e\") #'beads-show-edit-field)\n```\n\n### Implementation Pattern\nReuse existing multiline editing pattern from beads-create.el (lines 226-261):\n- Use generate-new-buffer for editing buffer\n- Try markdown-mode, fallback to text-mode\n- Enable visual-line-mode\n- Set header-line-format with instructions\n- Preserve parent buffer and project context\n\n### Field Detection\nTwo approaches to consider:\n1. Auto-detect field at point by checking section headers\n2. Prompt user with completing-read to choose field\n\nRecommend: Start with completing-read for simplicity, add auto-detection later.\n\n### Editable Fields\n- Title (single-line)\n- Description (markdown)\n- Acceptance Criteria (markdown)\n- Design (markdown)\n- Notes (markdown)\n\n### Update Flow\n1. User presses C-c C-e in show buffer\n2. Prompt for field to edit\n3. Open *beads-edit-FIELD* buffer with current content\n4. User edits and presses C-c C-c\n5. Call bd update ISSUE-ID --FIELD \"new content\" --json\n6. Update local beads-show--issue-data\n7. Call beads-refresh-show to re-render\n\n### Auto-refresh Integration\nFollow pattern from beads-update.el lines 545-554 to refresh all relevant buffers.\n\n## Implementation Tasks\n\n- Add beads-show-edit-field command\n- Add C-c C-e keybinding to beads-show-mode-map\n- Implement field selection (completing-read)\n- Create editing buffer with markdown-mode\n- Implement C-c C-c save logic with bd update call\n- Implement C-c C-k cancel logic\n- Add auto-refresh after successful update\n- Handle single-line fields (title) differently\n- Add error handling for failed updates\n- Write tests for edit-field functionality\n- Update beads-show.el commentary with new keybinding\n- Consider field auto-detection from point (enhancement)\n\n## Files to Modify\n\n- beads-show.el: Add keybinding and edit-field command\n- test/beads-show-test.el: Add tests\n\n## References\n\n- Existing multiline edit pattern: beads-create.el:226-261\n- Auto-refresh pattern: beads-update.el:545-554\n- Buffer management: beads-show.el:375-396\n- Markdown fontification: beads-show.el:219-254\n\n## UX Considerations\n\n- Clear header-line instructions (already established pattern)\n- Preserve cursor position after refresh\n- Show success message: \"Description updated\"\n- Show error if bd update fails\n- Don't lose work if update fails (keep edit buffer open)\n\n## Future Enhancements\n\n- Auto-detect field at point from section headers\n- Quick-edit specific field with C-c C-d (description), C-c C-a (acceptance)\n- Edit multiple fields in single session\n- Preview markdown rendering in split window\n- Syntax highlighting for code blocks","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:45:03.444881911+02:00","updated_at":"2025-10-16T23:47:06.358326047+02:00","closed_at":"2025-10-16T23:47:06.358326047+02:00"}
{"id":"beads-10","title":"Implement beads-close command in beads-main.el","description":"Implement the beads-close transient suffix to allow closing issues with a reason from the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:125","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-17T10:39:46.593865826Z","updated_at":"2025-10-17T11:30:34.223165583Z","closed_at":"2025-10-17T11:30:34.223165583Z"}
{"id":"beads-11","title":"Implement beads-stats command in beads-main.el","description":"Implement the beads-stats transient suffix to show issue statistics (total, by status, by priority, etc.) in the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:131","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-17T10:39:46.879300899Z","updated_at":"2025-10-17T11:38:41.715924361Z","closed_at":"2025-10-17T11:38:41.715924361Z"}
{"id":"beads-12","title":"Implement beads-dep command in beads-main.el","description":"Implement the beads-dep transient suffix to manage dependencies (add, remove, list) from the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:137","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-17T10:39:47.163686056Z","updated_at":"2025-10-17T11:46:22.503417731Z","closed_at":"2025-10-17T11:46:22.503417731Z"}
{"id":"beads-13","title":"Implement beads-init command in beads-main.el","description":"Implement the beads-init transient suffix to initialize a beads project from the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:143","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-17T10:39:47.453768644Z","updated_at":"2025-10-17T12:00:46.865653628Z","closed_at":"2025-10-17T12:00:46.865653628Z"}
{"id":"beads-14","title":"Implement beads-export command in beads-main.el","description":"Implement the beads-export transient suffix to export issues to JSONL from the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:149","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-17T10:39:47.758543779Z","updated_at":"2025-10-17T12:00:47.163787124Z","closed_at":"2025-10-17T12:00:47.163787124Z"}
{"id":"beads-15","title":"Implement beads-import command in beads-main.el","description":"Implement the beads-import transient suffix to import issues from JSONL into the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:155","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-17T10:39:48.070458437Z","updated_at":"2025-10-17T12:00:47.467279471Z","closed_at":"2025-10-17T12:00:47.467279471Z"}
{"id":"beads-16","title":"Fix slow issue completion by caching bd list calls","description":"The issue completion UI was calling 'bd list' multiple times for every keystroke - once in the completion table, once per issue for annotations, and once per issue for grouping. With 10 issues visible, this resulted in 21 calls to bd list for a single completion interaction.\n\nFixed by implementing a 5-second TTL cache in beads--get-cached-issues. The cache is invalidated after mutations (create/update/delete) to ensure freshness.\n\nChanges:\n- Added beads--completion-cache and beads--completion-cache-ttl variables\n- Added beads--get-cached-issues function with TTL caching\n- Added beads--invalidate-completion-cache function\n- Updated beads--issue-completion-table to use cache\n- Updated beads--annotate-issue to use cache  \n- Updated beads--group-issue to use cache\n- Updated beads-update--execute to invalidate cache after updates\n\nPerformance improvement: From O(N^2) bd calls to O(1) per completion session.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-10-17T11:02:02.154595994Z","updated_at":"2025-10-17T11:02:11.954923768Z","closed_at":"2025-10-17T11:02:11.954923768Z"}
{"id":"beads-17","title":"Remove single-line description option from beads-create.el","description":"The beads-create transient menu has both single-line (key 'd') and multiline (key 'M') options for editing the description. We should remove the single-line option and make the multiline editor the only way to edit descriptions. This provides a better UX since multiline is more flexible and the single-line option is redundant.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-17T11:14:39.850832713Z","updated_at":"2025-10-17T11:18:38.838326601Z","closed_at":"2025-10-17T11:18:38.838326601Z"}
{"id":"beads-18","title":"Remove single-line description option from beads-update.el","description":"The beads-update transient menu has a single-line description editor (key 'd') in addition to multiline editors for all content fields (D/A/E/N). We should remove the single-line description option and keep only the multiline version (key 'D'). The other three fields (acceptance-criteria, design, notes) already only have multiline editors, so description should match.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-17T11:14:40.07999054Z","updated_at":"2025-10-17T11:18:39.114079466Z","closed_at":"2025-10-17T11:18:39.114079466Z"}
{"id":"beads-19","title":"Test dependency issue","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-17T11:41:43.79881483Z","updated_at":"2025-10-17T11:42:07.128865504Z","closed_at":"2025-10-17T11:42:07.128865504Z"}
{"id":"beads-2","title":"Add markdown-mode-style outline navigation to beads-show","description":"Implement C-c C-n/p/f/b/u keybindings for hierarchical section navigation in beads-show-mode, matching markdown-mode behavior.\n\n## Background\n\nUsers familiar with markdown-mode and org-mode expect C-c C-* keybindings for outline navigation. Currently beads-show only has simple n/p for section navigation.\n\n## Keybindings to Add\n\n- **C-c C-n**: Move to next section (any level)\n- **C-c C-p**: Move to previous section (any level)\n- **C-c C-f**: Move to next section at same level\n- **C-c C-b**: Move to previous section at same level\n- **C-c C-u**: Move up to parent section\n\n## Section Hierarchy\n\n- Level 0: Title ()\n- Level 1: Major sections (Description, Acceptance Criteria, Design, Notes with )\n- Level 2+: Markdown headings (##, ###, etc.) within sections\n\n## Implementation\n\nAdd to beads-show-mode-map (beads-show.el line ~120):\n```elisp\n(define-key map (kbd \"C-c C-n\") #'beads-show-outline-next)\n(define-key map (kbd \"C-c C-p\") #'beads-show-outline-previous)\n(define-key map (kbd \"C-c C-f\") #'beads-show-outline-next-same-level)\n(define-key map (kbd \"C-c C-b\") #'beads-show-outline-previous-same-level)\n(define-key map (kbd \"C-c C-u\") #'beads-show-outline-up)\n```\n\n## Functions Needed\n\n1. beads-show--section-level: Calculate current section level\n2. beads-show--next-section: Find next section at any level\n3. beads-show--prev-section: Find previous section at any level\n4. beads-show-outline-next: Move to next section\n5. beads-show-outline-previous: Move to previous section\n6. beads-show-outline-next-same-level: Move to next section at same level\n7. beads-show-outline-previous-same-level: Move to previous section at same level\n8. beads-show-outline-up: Move to parent section\n\n## Detection Patterns\n\n- Title: ^.+\\n+$\n- Major section: ^[A-Z][a-zA-Z ]+\\n+$\n- Markdown heading: ^#+\\s+.+$\n\n## Keep Existing Bindings\n\nKeep n/p for simple section navigation as they're convenient.\n\n## Files to Modify\n\n- lisp/beads-show.el\n- lisp/test/beads-show-test.el","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-16T23:03:22.711911767+02:00","updated_at":"2025-10-17T12:57:04.812431586+02:00","closed_at":"2025-10-16T23:27:24.608485821+02:00"}
{"id":"beads-3","title":"Add paragraph navigation (M-{ M-}) to beads-show","description":"Add M-{ and M-} keybindings for paragraph-level navigation in beads-show-mode, matching markdown-mode behavior.\n\n## Background\n\nMarkdown-mode provides M-{ and M-} for moving backward/forward by paragraph. This is useful for quick navigation within sections.\n\n## Keybindings to Add\n\n- **M-{**: Move backward by paragraph\n- **M-}**: Move forward by paragraph\n\n## Paragraph Definition\n\nParagraphs are blocks separated by blank lines, including:\n- Text paragraphs\n- Code blocks (indented or fenced)\n- List items\n- Blockquotes\n\n## Implementation\n\nAdd to beads-show-mode-map:\n```elisp\n(define-key map (kbd \"M-{\") #'beads-show-backward-paragraph)\n(define-key map (kbd \"M-}\") #'beads-show-forward-paragraph)\n```\n\n## Functions\n\n```elisp\n(defun beads-show-backward-paragraph ()\n  \"Move backward by one paragraph.\"\n  (interactive)\n  (backward-paragraph 1))\n\n(defun beads-show-forward-paragraph ()\n  \"Move forward by one paragraph.\"\n  (interactive)\n  (forward-paragraph 1))\n```\n\nCan leverage Emacs built-in paragraph detection (forward-paragraph, backward-paragraph).\n\n## Files to Modify\n\n- lisp/beads-show.el\n- lisp/test/beads-show-test.el\n\n## Dependencies\n\n- Depends on beads-2 (outline navigation) for testing hierarchy","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T23:03:34.459812659+02:00","updated_at":"2025-10-17T12:02:38.810926332Z","closed_at":"2025-10-17T12:02:38.810926332Z","dependencies":[{"issue_id":"beads-3","depends_on_id":"beads-2","type":"blocks","created_at":"2025-10-16T23:04:36.986559168+02:00","created_by":"roman"}]}
{"id":"beads-4","title":"Add section boundary navigation (C-M-a C-M-e C-M-h) to beads-show","description":"Add C-M-a, C-M-e, and C-M-h keybindings for section boundary navigation in beads-show-mode, matching markdown-mode defun-style navigation.\n\n## Background\n\nMarkdown-mode provides defun-style navigation (C-M-a/e) to jump to beginning/end of sections, and C-M-h to mark the current section. These are useful for quick section manipulation.\n\n## Keybindings to Add\n\n- **C-M-a**: Move to beginning of current section\n- **C-M-e**: Move to end of current section\n- **C-M-h**: Mark current section\n\n## Section Definition\n\nA section is:\n- The title block ()\n- A major section (Description, Design, etc. with )\n- A markdown heading (##, ###) and its content\n\n## Implementation\n\nAdd to beads-show-mode-map:\n```elisp\n(define-key map (kbd \"C-M-a\") #'beads-show-beginning-of-section)\n(define-key map (kbd \"C-M-e\") #'beads-show-end-of-section)\n(define-key map (kbd \"C-M-h\") #'beads-show-mark-section)\n```\n\n## Behavior\n\n**C-M-a**: \n- If at section header, stay there\n- Otherwise, move to beginning of current section header\n\n**C-M-e**:\n- Move to end of current section (before next section or EOF)\n\n**C-M-h**:\n- Set mark at beginning of section\n- Move point to end of section\n- Activate region\n\n## Files to Modify\n\n- lisp/beads-show.el\n- lisp/test/beads-show-test.el\n\n## Dependencies\n\n- Depends on beads-2 (outline navigation) for section detection","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T23:03:46.888008677+02:00","updated_at":"2025-10-17T12:04:44.303553382Z","closed_at":"2025-10-17T12:04:44.303553382Z","dependencies":[{"issue_id":"beads-4","depends_on_id":"beads-2","type":"blocks","created_at":"2025-10-16T23:04:37.097189499+02:00","created_by":"roman"}]}
{"id":"beads-5","title":"Add markdown-mode link navigation aliases (M-n M-p C-c C-o)","description":"Add M-n, M-p, and C-c C-o as markdown-mode-compatible aliases for bd-N reference navigation in beads-show-mode.\n\n## Background\n\nMarkdown-mode uses M-n/M-p for link navigation and C-c C-o to follow links. beads-show currently uses [/] for reference navigation and RET to follow. Adding markdown-mode aliases improves discoverability and muscle memory for markdown users.\n\n## Keybindings to Add\n\n- **M-n**: Jump to next bd-N reference (alias for ])\n- **M-p**: Jump to previous bd-N reference (alias for [)\n- **C-c C-o**: Follow bd-N reference at point (alias for RET)\n\n## Implementation\n\nAdd to beads-show-mode-map:\n```elisp\n(define-key map (kbd \"M-n\") #'beads-show-next-reference)\n(define-key map (kbd \"M-p\") #'beads-show-previous-reference)\n(define-key map (kbd \"C-c C-o\") #'beads-show-follow-reference)\n```\n\nThese are just aliases - the existing functions already exist.\n\n## Keep Existing Bindings\n\nKeep [, ], and RET bindings. They're convenient and some users may prefer them.\n\n## Compatibility\n\nNo conflicts with existing bindings. M-n/M-p are free in special-mode.\n\n## Files to Modify\n\n- lisp/beads-show.el (just add 3 keybindings)\n- lisp/test/beads-show-test.el (verify bindings work)\n\n## Note\n\nThis is low priority since the functionality already exists, just with different keys. Mainly for consistency with markdown-mode.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-16T23:03:59.733796456+02:00","updated_at":"2025-10-16T23:03:59.733796456+02:00"}
{"id":"beads-6","title":"Add block navigation (C-M-{ C-M-}) to beads-show","description":"Add C-M-{ and C-M-} keybindings for block-level navigation in beads-show-mode, matching markdown-mode behavior.\n\n## Background\n\nMarkdown-mode provides C-M-{ and C-M-} for navigating by blocks (code blocks, lists, blockquotes). This complements paragraph navigation (M-{/}).\n\n## Keybindings to Add\n\n- **C-M-{**: Move backward by block\n- **C-M-}**: Move forward by block\n\n## Block Definition\n\nBlocks include:\n- Code blocks (fenced or indented)\n- Entire lists (all items together)\n- Blockquotes (\u003e prefixed)\n- Tables\n\nThis is different from paragraph navigation which treats each list item as separate.\n\n## Implementation\n\nAdd to beads-show-mode-map:\n```elisp\n(define-key map (kbd \"C-M-{\") #'beads-show-backward-block)\n(define-key map (kbd \"C-M-}\") #'beads-show-forward-block)\n```\n\n## Detection Strategy\n\nNeed to detect:\n- Fenced code blocks: ``` or ~~~\n- Indented code blocks: 4+ spaces consistently\n- Lists: consecutive lines starting with -, *, +, or numbers\n- Blockquotes: consecutive lines starting with \u003e\n\n## Complexity\n\nMore complex than paragraph navigation since we need to recognize block types. May want to start simple and enhance over time.\n\n## Files to Modify\n\n- lisp/beads-show.el\n- lisp/test/beads-show-test.el\n\n## Priority\n\nLow priority - nice to have but paragraph navigation (M-{/}) covers most use cases.\n\n## Dependencies\n\nNone, but builds on paragraph navigation concepts.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-16T23:04:12.799912265+02:00","updated_at":"2025-10-16T23:04:12.799912265+02:00"}
{"id":"beads-7","title":"Add paragraph marking (M-h) to beads-show","description":"Add M-h keybinding for marking paragraphs in beads-show-mode, matching markdown-mode behavior.\n\n## Background\n\nMarkdown-mode provides M-h to mark the current paragraph. This is useful for copying or manipulating paragraph-sized chunks of text.\n\n## Keybinding to Add\n\n- **M-h**: Mark current paragraph\n\n## Behavior\n\nSet mark at beginning of current paragraph, move point to end of paragraph, and activate region.\n\n## Implementation\n\nAdd to beads-show-mode-map:\n```elisp\n(define-key map (kbd \"M-h\") #'beads-show-mark-paragraph)\n```\n\nFunction:\n```elisp\n(defun beads-show-mark-paragraph ()\n  \"Mark the current paragraph.\"\n  (interactive)\n  (mark-paragraph))\n```\n\nCan use built-in mark-paragraph function.\n\n## Compatibility\n\nM-h is typically bound to mark-paragraph in text modes, so this is consistent with Emacs conventions.\n\n## Use Case\n\nUseful for:\n- Copying paragraph text\n- Understanding paragraph boundaries\n- Consistent with markdown-mode\n\n## Files to Modify\n\n- lisp/beads-show.el\n- lisp/test/beads-show-test.el\n\n## Priority\n\nLow priority - nice consistency feature but not essential for navigation.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-16T23:04:22.734441032+02:00","updated_at":"2025-10-16T23:04:22.734441032+02:00"}
{"id":"beads-8","title":"Add Tramp support to beads.el","description":"beads.el in the lisp directory should work over Tramp for remote project access","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-16T22:53:57.206553204Z","updated_at":"2025-10-16T23:00:34.374284233Z","closed_at":"2025-10-16T23:00:34.374284233Z"}
{"id":"beads-9","title":"Implement beads-update command in beads-main.el","description":"Implement the beads-update transient suffix to allow updating issue status, priority, and other fields from the Emacs UI. Currently shows 'not yet implemented' message at lisp/beads-main.el:119","acceptance_criteria":"All tests are passing","notes":"Add ERT tests to verify the command works correctly.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-17T10:39:46.324821609Z","updated_at":"2025-10-17T10:48:56.574498279Z","closed_at":"2025-10-17T10:48:56.574498279Z"}
